import pytest
import jsontran


@pytest.mark.parametrize(
    "i18n_dict, lang, expect",
    [
        ({}, "en", {}),
        ([], "en", []),
        ([[]], "en", [[]]),
        ({"i18n": {}}, "en", {}),
        ([{"i18n": {}}], "en", [{}]),
        ([{"i18n": {}}, {"i18n": {}}], "en", [{}, {}]),
        ({"t": "t", "i18n": {}}, "pt", {"t": "t"}),
        ([{"t": "t", "i18n": {}}], "pt", [{"t": "t"}]),
        ({"t": "t", "i18n": {}}, "en", {"t": "t"}),
        ([{"t": "t", "i18n": {}}], "en", [{"t": "t"}]),
        ({"t": "t", "i18n": {"t2": "t 2"}}, "en", {"t": "t"}),
        ([{"t": "t", "i18n": {"t2": "t 2"}}], "en", [{"t": "t"}]),
        ({"t": "t"}, "en", {"t": "t"}),
        ([{"t": "t"}], "en", [{"t": "t"}]),
        ({"t": "t", "i18n": {"t_pt": "t pt"}}, "en", {"t": "t"}),
        ({"t": "t", "i18n": {"t_es": "t es"}}, "pt", {"t": "t"}),
        ({"t": "t", "i18n": {"t_pt": "t pt"}}, "pt", {"t": "t pt"}),
        (
            {
                "t": "t",
                "i18n": {"t_pt": "t pt"},
                "t1": {"t1.1": "t1.1", "i18n": {"t1.1_pt": "t1.1 pt"}},
            },
            "en",
            {"t": "t", "t1": {"t1.1": "t1.1"}},
        ),
        (
            {
                "t": "t",
                "i18n": {"t_pt": "t pt"},
                "t1": {"t1.1": "t1.1", "i18n": {"t1.1_pt": "t1.1 pt"}},
            },
            "pt",
            {"t": "t pt", "t1": {"t1.1": "t1.1 pt"}},
        ),
        (
            {
                "t": "t",
                "i18n": {},
                "t1": {"t1.1": "t1.1", "i18n": {"t1.1_pt": "t1.1 pt"}},
            },
            "pt",
            {"t": "t", "t1": {"t1.1": "t1.1 pt"}},
        ),
        (
            {"t": "t", "t2": "t2", "i18n": {"t_pt": "t pt", "t2_pt": "t2 pt"}},
            "en",
            {"t": "t", "t2": "t2"},
        ),
        (
            {
                "t": "t",
                "t2": "t2",
                "i18n": {"t_pt": "t pt", "t2_pt": "t2 pt"},
                "t3": {
                    "t3.1": "t 3.1",
                    "t3.2": "t 3.2",
                    "i18n": {"t3.1_pt": "t 3.1 pt", "t3.2_pt": "t 3.2 pt"},
                },
            },
            "pt",
            {
                "t": "t pt",
                "t2": "t2 pt",
                "t3": {"t3.1": "t 3.1 pt", "t3.2": "t 3.2 pt"},
            },
        ),
        (
            {
                "t": "t",
                "t2": "t2",
                "i18n": {"t_pt": "t pt", "t2_pt": "t2 pt"},
                "t3": {
                    "t3.1": "t 3.1",
                    "t3.2": "t 3.2",
                    "i18n": {"t3.1_pt": "t 3.1 pt"},
                },
            },
            "pt",
            {"t": "t pt", "t2": "t2 pt", "t3": {"t3.1": "t 3.1 pt", "t3.2": "t 3.2"}},
        ),
        ([{"t": [{"t1": {}}, {"t2": {}}]}], "en", [{"t": [{"t1": {}}, {"t2": {}}]}]),
        (
            [
                {
                    "t": [
                        {"t1": "t1", "i18n": {"t1_pt": "t1 pt"}},
                        {"t2": "t2", "i18n": {"t2_pt": "t2 pt"}},
                    ]
                }
            ],
            "pt",
            [{"t": [{"t1": "t1 pt"}, {"t2": "t2 pt"}]}],
        ),
        (
            [{"t": "t", "t1": [{"t1.1": "t1.1"}]}],
            "en",
            [{"t": "t", "t1": [{"t1.1": "t1.1"}]}],
        ),
        (
            [
                {
                    "t": "t",
                    "t1": [{"t1.1": "t1.1", "i18n": {"t1.1_pt": "t1.1 pt"}}],
                    "i18n": {"t_pt": "t pt"},
                }
            ],
            "pt",
            [{"t": "t pt", "t1": [{"t1.1": "t1.1 pt"}]}],
        ),
    ],
)
def test__translations(i18n_dict, lang, expect):
    assert expect == jsontran.translate(i18n_dict, lang)
